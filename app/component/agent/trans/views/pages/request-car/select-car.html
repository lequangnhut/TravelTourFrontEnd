<div class="container">
    <div class="header-control mb-4">
        <div class="header-control-center">
            <div class="d-flex justify-content-between align-items-center row">
                <div class="col-xl-12 mt-3">
                    <h3 class="color-green fw-bold text-uppercase">
                        Chọn dịch vụ cần cung cấp
                    </h3>
                </div>
            </div>
            <div class="mt-3">
                <ul class="d-flex mb-3 ps-0" style="list-style: none">
                    <li>
                        <a href="/business/transport/notification-request-car" class="fw-medium text-dark">
                            Các yêu cầu về chuyến xe
                        </a>
                        <i class="fa-solid fa-chevron-right" style="font-size: 14px"></i>
                    </li>
                    &nbsp;
                    <li class="fw-bold">Cung cấp dịch vụ</li>
                </ul>
            </div>
        </div>
    </div>

    <div ng-include="'app/component/utils/loading-component.html'"></div>

    <div class="mb-4" style="margin: 20px 0 20px 0">
        <div class="row">
            <div class="col-lg-4 mb-3" ng-repeat="transport in transportationList">
                <div class="card-request-car">
                    <div class="content-request-schedule p-3">
                        <h3 class="title-request-schedule">
                            <p class="fw-medium fs-1" ng-if="!transport.isTransportBed">
                                Xe ghế ngồi - {{ transport.amountSeat }} chổ
                            </p>
                            <p class="fw-medium fs-1" ng-if="transport.isTransportBed">
                                Xe giường nằm - {{ transport.amountSeat }} giường
                            </p>
                            <a class="text-dark fw-medium mb-3 text-decoration-none">
                                {{ transport.id }} - {{ transport.licensePlate }}
                            </a>
                        </h3>

                        <div class="meta">
                            <span class="icon"><i class="flaticon-blanket"></i></span>
                            <span class="icon"><i class="flaticon-cat"></i></span>
                            <span class="icon"><i class="flaticon-tent"></i></span>
                            <span class="icon"><i class="flaticon-fire"></i></span>
                        </div>
                        <a href="#" class="icon-btn" ng-click="openModal(transport.id)">
                            <span class="fas fa-arrow-right"></span>
                        </a>
                    </div>
                    <div class="img-holder">
                        <img ng-src="{{ transport.transportationImg }}" alt="Service Image">
                    </div>
                </div>
            </div>
        </div>

        <div class="div" ng-if="transportationList.length <= 0">
            <div class="d-flex justify-content-center align-items-center mt-3">
                Hiện tại nhà xe của bạn chưa có xe, vui lòng tạo xe.
            </div>
        </div>
    </div>
</div>

<!-- Modal xem thông tin chi tiết của xe -->
<div class="modal fade" id="modal-transport-detail" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
     aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header text-white">
                <h5 class="modal-title" id="exampleModalLabel">
                    Chi tiết phượng tiện - {{ transportation.licensePlate }}
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-12">
                            <div class="card mb-3">
                                <img class="img-fluid rounded-2" ng-src="{{ transportation.transportationImg }}"
                                     style="height: 500px"/>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="card mb-3">
                                <div class="card-header p-3 fw-bold">
                                    Thông tin xe khách
                                </div>
                                <div class="card-body p-3">
                                    <p class="m-2 fw-medium">Mã xe khách: <span
                                            class="fw-medium">{{ transportation.id }}</span></p>
                                    <p class="m-2 fw-medium">Biển số xe: <span
                                            class="fw-medium">{{ transportation.licensePlate }}</span></p>
                                    <p class="m-2 fw-medium">Số ghế ngồi: <span
                                            class="fw-medium">{{ transportation.amountSeat }} Chổ</span></p>
                                    <p class="m-2 fw-medium">Loại chổ ngồi:
                                        <span class="fw-normal"
                                              ng-if="transportation.isTransportBed === false">
                                                Xe ghế ngồi
                                        </span>
                                        <span class="fw-normal"
                                              ng-if="transportation.isTransportBed === true">
                                                Xe giường nằm
                                        </span>
                                    </p>
                                    <p class="m-2 fw-medium">Loại xe: <span
                                            class="fw-normal">{{ transportType.transportationTypeName }}</span></p>
                                    <p class="m-2 fw-medium">
                                        Trạng thái:
                                        <span class="fw-medium color-green"
                                              ng-if="transportation.isActive === true">
                                                Đang hoạt động
                                        </span>
                                        <span class="fw-medium color-green"
                                              ng-if="transportation.isActive === false">
                                                Ngưng hoạt động
                                        </span>
                                    </p>
                                </div>
                            </div>

                            <div class="card">
                                <div class="card-header p-3 fw-bold">
                                    Các tiện ích của xe
                                </div>
                                <div class="card-body p-3">
                                    <div ng-repeat="util in transportUtilityModal">
                                        <li class="m-2">{{ util.title }}</li>
                                    </div>
                                    <div class="d-flex justify-content-center"
                                         ng-if="transportUtilityModal.length === 0">
                                        Xe <span class="fw-medium">&nbsp;{{ transportation.licensePlate }}&nbsp;</span>
                                        chưa có tiện ích.
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="card mb-3">
                                <div class="card-header p-3 fw-bold">
                                    Thông tin yêu cầu của chuyến đi
                                </div>
                                <div class="card-body p-3">
                                    <p class="m-2 fw-medium">Mã chuyến đi:
                                        <span class="fw-medium">
                                            {{ tourDetail.id }}
                                        </span>
                                    </p>
                                    <p class="m-2 fw-medium">Số lượng khách hàng:
                                        <span class="fw-medium text-warning">
                                            {{ requestCar.amountCustomer }} khách
                                        </span>
                                    </p>
                                    <p class="m-2 fw-medium">Thời gian xuất phát:
                                        <span class="fw-normal">
                                            {{ requestCar.departureDate | vietnameseDateTime }}
                                        </span>
                                    </p>
                                    <p class="m-2 fw-medium">Loại xe:
                                        <span class="fw-medium text-warning"
                                              ng-if="requestCar.isTransportBed === false">
                                                Xe ghế ngồi
                                        </span>
                                        <span class="fw-medium text-warning"
                                              ng-if="requestCar.isTransportBed === true">
                                                Xe giường nằm
                                        </span>
                                    </p>
                                    <p class="m-2 fw-medium">Điểm đến:
                                        <span class="fw-medium text-warning">
                                            {{ requestCar.toLocation }}
                                        </span>
                                    </p>
                                </div>
                            </div>

                            <div class="card">
                                <div class="card-body p-3">
                                    <form method="post" name="formSubmitRequest" ng-click="">
                                        <div class="form-group">
                                            <label for="unitPrice" class="form-label">
                                                TỔNG GIÁ TIỀN <strong class="text-danger">*</strong>
                                            </label>
                                            <input type="text"
                                                   class="form-control"
                                                   name="unitPrice"
                                                   id="unitPrice"
                                                   ng-model="requestCarDetail.unitPrice"
                                                   ng-class="{ 'is-invalid': formSubmitRequest.unitPrice.$invalid && formSubmitRequest.unitPrice.$touched,
                                                                'is-valid': formSubmitRequest.unitPrice.$valid && formSubmitRequest.unitPrice.$touched }"
                                                   vietnam-currency-input
                                                   placeholder="Tổng giá tiền cho chuyến đi..."
                                                   required
                                            >
                                            <small class="text-danger"
                                                   ng-show="formSubmitRequest.unitPrice.$touched && formSubmitRequest.unitPrice.$error.required">
                                                Vui lòng nhập giá tiền để gửi yêu cầu !
                                            </small>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>

                        <div class="col-12 mb-5 mt-5 p-3">
                            <div class="row mb-3">
                                <div class="col-12">
                                    <div class="row">
                                        <div class="col-xl-3 p-1" ng-repeat="img in transportationImages">
                                            <img class="img-fluid" style="height: 100%; width: 100%; border-radius: 8px"
                                                 ng-src="{{img.imagePath}}"/>
                                        </div>
                                        <div class="col-12" ng-if="transportationImages.length === 0">
                                            Không có hình ảnh.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn" data-bs-dismiss="modal">
                    <i class="fa-solid fa-arrow-left"></i>
                    Thoát
                </button>
                <button type="button"
                        class="btn btn-success"
                        ng-click="submitRequestCarToStaff()"
                        ng-disabled="formSubmitRequest.$invalid"
                >
                    Gửi yêu cầu
                </button>
            </div>
        </div>
    </div>
</div>