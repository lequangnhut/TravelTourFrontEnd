<!--====== Start Preloader ======-->
<div class="preloader">
    <div class="loader">
        <div class="pre-shadow"></div>
        <div class="pre-box"></div>
    </div>
    <div class="bg"></div>
</div><!--====== End Preloader ======-->
<section id="information-section">
    <div class="container mt-5">
        <div class="">
            <div class="h2 mb-3">Thông tin tài khoản</div>
            <div class="row ">
                <nav id="sidebar" class="col-md-3 col-lg-3 d-md-block sidebar">
                    <div ng-include="'app/component/customers/views/components/information/sidebar.html'"></div>
                </nav>
                <!-- Main content -->
                <main class="col-md-9 ms-sm-auto col-lg-9 px-md-4">
                    <div class="info-content">
                        <div class="h6">Hồ sơ</div>
                        <div class="profile bg-light">
                            <div class=" d-flex align-items-center justify-content-between">
                                <div class="box-profile d-flex align-items-center">
                                    <img id="" ng-src="{{ customer.avatar }}"
                                         class="rounded-circle" style="width: 80px; height: 80px; object-fit: cover;"
                                         alt="example placeholder"/>
                                    <div class="profile-info">
                                        <div class="name h4"> {{customer.fullName}}</div>
                                        <div class="d-flex align-items-center">
                                        <span class="label">Giới tính:
                                            <span class="fw-bold" ng-if="(customer.gender) == null">
                                               (Chưa Cập Nhật)
                                            </span>
                                             <span class="fw-bold" ng-if="(customer.gender) == 1">
                                               Nữ
                                            </span>
                                             <span class="fw-bold" ng-if="(customer.gender) == 2">
                                              Nam
                                            </span>
                                            <span class="fw-bold" ng-if="(customer.gender) == 3">
                                              Khác
                                            </span>
                                        </span>
                                            <span class="line"></span>
                                            <span class="label">Ngày sinh: <span
                                                    class="fw-bold"> {{customer.birth | date:'dd-MM-yyyy'}}</span></span>
                                        </div>
                                    </div>
                                </div>
                                <div class="change-information ">
                                    <button ng-click="showModalChangeProfile(customer.id)" class="btn">Thay đổi</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="info-content mt-5 mb-5">
                        <div class="h6">Tài khoản và bảo mật</div>
                        <div class="profile bg-light">
                            <div class=" d-flex align-items-center justify-content-between">
                                <div class="persional-acccount w-100">
                                    <div class="item d-flex align-items-center justify-content-between">
                                        <div class="box-profile d-flex align-items-center">
                                            <span>Số Điện Thoại: <span class="fw-bold"> {{customer.phone}}</span></span>
                                        </div>
                                        <div class="change">
                                            <button ng-click="showModalChangePhoneNumber(customer.id)" class="btn">Thay
                                                đổi
                                            </button>
                                        </div>
                                    </div>
                                    <div class="item d-flex align-items-center justify-content-between">
                                        <div class="box-profile d-flex align-items-center">
                                            <span>ID: <span class="fw-bold"> {{customer.id}}</span></span>
                                        </div>
                                        <div class="change">
                                        </div>
                                    </div>
                                    <div class="item d-flex align-items-center justify-content-between">
                                        <div class="box-profile d-flex align-items-center">
                                            <span>Email: <span class="fw-bold">{{customer.email}}</span></span>
                                        </div>
                                    </div>
                                    <div class="item d-flex align-items-center justify-content-between">
                                        <div class="box-profile d-flex align-items-center">
                                            <span>Mật khẩu: <span class="fw-bold">********</span></span>
                                        </div>
                                        <div class="change">
                                            <a href="/home/information/change-password" class="text-dark btn">Thay
                                                đổi</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </div>
    </div>
</section>
<!--Thay đổi thông tin, fullname, giới tính, ngày sinh-->
<div id="change-profile" class="modal fade">
    <form ng-submit="updateTourSubmit()" method="POST" name="infoForm">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="mb-3 d-flex justify-content-end">
                    <button style="margin: 24px 24px 0 0" type="button" class="btn-close"
                            data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="container-fluid">
                        <div class="h4 text-center mb-3">Thông tin cá nhân</div>
                        <div class="d-flex justify-content-center">
                            <img id="selectedAvatar" ng-src="{{ getCurrentImageSource() }}"
                                 class="rounded-circle" style="width: 80px; height: 80px; object-fit: cover;"
                                 alt="example placeholder"/>
                        </div>
                        <div class="d-flex justify-content-center">
                            <div class="btn">
                                <label class="form-label color-green m-1" for="avatar">Chọn hình ảnh</label>
                                <input class="form-control d-none" type="file" id="avatar"
                                       accept=".png, .jpg, .jpeg"
                                       ngf-select="uploadTourImage($file)"
                                       ng-model = "customerUpdate.avatarUpdate" />

                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="fullName" class="form-label" Tên của bạn></label>
                            <input type="text" class="form-control fw-medium" id="fullName" name="fullname" placeholder="Tên của bạn"
                                   ng-model="customerUpdate.fullName"
                                   ng-class="{ 'is-invalid': infoForm.fullname.$invalid && infoForm.fullname.$touched, 'is-valid': infoForm.fullname.$valid && infoForm.fullname.$touched }"
                                   required
                            >
                            <small class="text-danger" ng-show="infoForm.fullname.$touched && infoForm.fullname.$error.required">
                                Vui lòng nhập tên của bạn !
                            </small>

                        </div>
                        <div class="mb-3">
                            Giới tính
                            <select class="form-select fw-medium" name="gender" aria-label="Default select example"
                                    ng-model="customerUpdate.gender">
                                <option ng-selected="customerUpdate.gender === null" value="null">(Chưa Cập Nhật)</option>
                                <option ng-selected="customerUpdate.gender === 1" value="1">Nữ</option>
                                <option ng-selected="customerUpdate.gender === 2" value="2">Nam</option>
                                <option ng-selected="customerUpdate.gender === 3" value="3">Khác</option>
                            </select>

                        </div>
                        <div class="mb-3">
                            <label for="birthDay" class="form-label ">Ngày sinh</label>
                            <input type="date" class="form-control fw-medium" id="birthDay" name="birthDay" ng-model="customerUpdate.birth | date:'dd-MM-yyyy'"
                            ng-class="{ 'is-invalid': infoForm.birthDay.$invalid && infoForm.birthDay.$touched, 'is-valid': infoForm.birthDay.$valid && infoForm.birthDay.$touched }"
                            required
                            >
                            <small class="text-danger" ng-show="infoForm.birthDay.$touched && infoForm.birthDay.$error.required">
                                Vui lòng nhập ngày sinh !
                            </small>
                        </div>
                        <div class="mb-3">
                            <label for="addrees" class="form-label">Địa chỉ</label>
                            <input type="text" class="form-control fw-medium" id="addrees" name="address" placeholder="Địa chỉ"
                                   ng-model="customerUpdate.address"
                                   ng-class="{ 'is-invalid': infoForm.address.$invalid && infoForm.address.$touched, 'is-valid': infoForm.address.$valid && infoForm.address.$touched }"
                                   required
                            >
                            <small class="text-danger"
                                   ng-show="infoForm.address.$touched && infoForm.address.$error.required">
                                Vui lòng nhập địa chỉ !
                            </small>
                        </div>
                    </div>
                </div>
                <div class="mt-3 d-flex justify-content-center pb-5">
                    <button type="submit" class="btn btn-green" style="padding: 8px 50px; border-radius: 30px"
                            ng-disabled="change-profile.$invalid" data-bs-dismiss="modal">Cập nhật
                    </button>
                </div>
            </div>
        </div>
    </form>
</div>

<!--Thay đổi thông tin số điện thoại-->
<div id="change-phoneNumber" class="modal fade">
    <form ng-submit="updateTourSubmit()" method="POST" name="updatePhone">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="mb-3 d-flex justify-content-end">
                    <button style="margin: 24px 24px 0 0" type="button" class="btn-close"
                            data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="container-fluid">
                        <div class="h4 mb-3">Đổi số điện thoại</div>
                        <div class="mb-3"><p>Nhập số điện thoại của bạn và hoàn tất quá trình thay đổi số điện thoại</p>
                        </div>
                        <div class="mb-3">
                            <label for="phone" class="form-label">Số điện thoại</label>
                            <input type="text" class="form-control fw-medium" id="phone"
                                   name="phone"
                                   placeholder="Số điện thoại"
                                   ng-model="customerUpdate.phone"
                                   ng-class="{ 'is-invalid': updatePhone.phone.$invalid && updatePhone.phone.$touched, 'is-valid': updatePhone.phone.$valid && updatePhone.phone.$touched }"
                                   ng-pattern="/^(0[0-9]{9}|84[0-9]{9})$/"
                                   ng-change="checkDuplicatePhone()"
                                   maxlength="10"
                                   required
                            >
                            <small class="text-danger"
                                   ng-show="updatePhone.phone.$touched && updatePhone.phone.$error.required">
                                Vui lòng nhập số điện thoại !
                            </small>
                            <small class="text-danger"
                                   ng-show="updatePhone.phone.$touched && updatePhone.phone.$error.pattern">
                                Số điện thoại không đúng định dạng !
                            </small>
                            <small class="text-danger" ng-show="updatePhone.phone.$touched && phoneError">
                                Số điện thoại đã tồn tại ở một tài khoản khác !
                            </small>
                        </div>
                    </div>
                </div>
                <div class="mt-3 d-flex justify-content-center pb-5">
                    <button type="submit" class="btn btn-green" style="padding: 8px 50px; border-radius: 30px"
                            data-bs-dismiss="modal"
                            ng-disabled="change-profile.$invalid">Cập nhật
                    </button>
                </div>
            </div>
        </div>
    </form>
</div>
